<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="SOP Notaufnahme ‚Äî Klinische Standards f√ºr die Notfallmedizin. Offline verf√ºgbar.">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SOP Notaufnahme">
    
    <title>SOP Notaufnahme</title>
    
    <!-- Favicon SVG (Inline f√ºr Performance) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Main Styles -->
    <link rel="stylesheet" href="styles.css?v=20260208-2">
</head>
<body>

    <div id="app" class="app-shell">
        
        <!-- Mobile Header (Sticky) -->
        <header class="mobile-header">
            <button class="icon-btn menu-trigger" id="mobileMenuBtn" aria-label="Men√º √∂ffnen">
                <i class="fa-solid fa-bars"></i>
            </button>
            <div class="mobile-title" id="mobileTitle">SOP Notaufnahme</div>
            <div class="mobile-actions">
                <button class="icon-btn search-trigger" id="mobileSearchBtn" aria-label="Suche √∂ffnen">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
            </div>
        </header>

        <!-- Sidebar (Desktop: Permanent, Mobile: Drawer) -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="app-logo" id="appLogo">
                    <div class="logo-icon"><i class="fa-solid fa-heart-pulse"></i></div>
                    <div class="logo-text">
                        <span class="logo-main">SOP Notaufnahme</span>
                        <span class="logo-sub">Klinische Standards</span>
                    </div>
                </div>
            </div>

            <!-- Global Search Container -->
            <div class="search-container" id="searchContainer">
                <div class="search-input-wrapper">
                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                    <input type="text" id="searchInput" placeholder="SOP suchen..." autocomplete="off" spellcheck="false">
                    <button id="searchClear" class="search-clear" aria-label="Suche l√∂schen">
                        <i class="fa-solid fa-circle-xmark"></i>
                    </button>
                </div>
            </div>

            <!-- Category Filter Pills -->
            <div class="category-scroll-container">
                <div class="category-filters" id="categoryFilters">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>

            <!-- Navigation List -->
            <nav class="nav-list" id="navList">
                <!-- Wird dynamisch gef√ºllt -->
            </nav>

            <div class="sidebar-footer">
                <button class="theme-toggle" id="themeToggle" aria-label="Design wechseln">
                    <i class="fa-solid fa-moon"></i> <span>Dunkles Design</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="mainContent">
            <div class="content-scroll" id="contentScroll">
                
                <!-- Breadcrumb & Header Actions (Desktop) -->
                <div class="content-header desktop-only">
                    <div class="breadcrumb" id="breadcrumb">√úbersicht</div>
                    <div class="header-tools">
                        <button class="icon-btn" id="printBtn" title="Drucken">
                            <i class="fa-solid fa-print"></i>
                        </button>
                    </div>
                </div>

                <!-- Views -->
                <div id="viewHome" class="view-section active">
                    <!-- Dynamischer Home Content -->
                </div>

                <div id="viewSOP" class="view-section" style="display: none;">
                    <!-- Dynamischer SOP Content -->
                </div>

                <div id="viewSearch" class="view-section" style="display: none;">
                    <div class="search-results-header">
                        <h2>Suchergebnisse</h2>
                        <span id="searchCount" class="badge">0 Treffer</span>
                    </div>
                    <div id="searchResultsList" class="search-results-list"></div>
                </div>

                <!-- Spacer for scrolling -->
                <div style="height: 60px;"></div>
            </div>
        </main>

        <!-- Mobile Overlay -->
        <div class="overlay" id="sidebarOverlay"></div>

        <!-- Floating Action Button (Back to Top / Home) -->
        <button class="fab" id="fabAction" aria-label="Nach oben">
            <i class="fa-solid fa-chevron-up"></i>
        </button>

    </div>

    <!-- Data Scripts (Order is important!) -->
    <script src="sop-data-1.js?v=2"></script>
    <script src="sop-data-2.js?v=2"></script>
    <script src="sop-data-3.js?v=2"></script>
    <script src="sop-data-4.js?v=2"></script>
    
    <!-- App Logic -->
    <script src="app.js?v=2"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('SW registriert'))
                    .catch(err => console.log('SW Fehler:', err));
            });
        }
    </script>
</body>
</html>